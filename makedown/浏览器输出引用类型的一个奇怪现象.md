在做项目的时候发现一个问题 ,浏览器在控制台一个引用类型的数据的时候,会出现显示的内容和展开后的内容不一致的问题.具体情况见以下代码.

我重新做了示例:

示例1:

	var arr = [
            {"name":'aa'},
            {'name':'bb'},
            {"name":"cc"}
            ]

    console.log(arr);
浏览器打印

	(3) [{…}, {…}, {…}]
显示的是三个数据,点击展开后:
	
	0:{name: "aa"}
	1:{name: "bb"}
	2:{name: "cc"}
	length:3
	__proto__:Array(0)

接下来问题出现当我修改代码:  
示例2:   

    var arr = [
        {"name":'aa'},
        {'name':'bb'},
        {"name":"cc"}
        ]
    console.log(arr);
    arr.push({"name":'ddd'})//往数组添加一条数据

浏览器打印:

	(3) [{…}, {…}, {…}]

可以看到,依旧只有三条数据,可是我明明已经添加了一条数据,现在应该是4才对 , 先不去深究 , 点击展开

	0:{name: "aa"}
	1:{name: "bb"}
	2:{name: "cc"}
	3:{name: "ddd"}
	length:4
	__proto__:Array(0)

可以看到, 展开后显示了正确的数据 , 也就是浏览器一开始显示的数据和展开后的数据不同 , 那么这是为什么呢?

原因:

因为该数据类型是引用类型,数据存储在堆中,当浏览器执行到console.log的时候,之后的增加一条数据并没有执行 . 

此时浏览器只输出了3条数据(**未展开的状态**)

那么为什么展开后又是4条数据呢 ,这里就是浏览器本身的原因了:

**浏览器只有在展开的时候才去调用内存中的数据进行显示**

所以就可以合理的解释这个问题了 , 执行console.log,数组只有三条数据 , 此时打印(未展开的状态)出来的有三条 , 当执行添加数据这句代码后 , 数组所在的堆中数据变成了四条 , 然后再去浏览器点击展开 , 就显示了正常的四条数据 . 

虽然不是什么大问题 , 但也困扰了我很久 , 写在这里仅作记录...









